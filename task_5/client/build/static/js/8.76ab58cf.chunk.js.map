{"version":3,"sources":["../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v4.js","pages/signup/Signup.js","components/secureInput/SecureInput.js"],"names":["getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","REGEX","test","byteToHex","i","push","toString","substr","stringify","arr","offset","arguments","length","undefined","toLowerCase","TypeError","v4","options","buf","rnds","random","Signup","history","useHistory","useState","fName","setFname","lName","setLname","city","setCity","email","setEmail","password","setPassword","isLoading","setIsLoading","fNameErr","setFnameErr","lNameErr","setLnameErr","cityErr","setCityErr","emailErr","setEmailErr","passwordErr","setPasswordErr","useEffect","token","JSON","parse","localStorage","getItem","axios","post","then","res","data","userId","HOME","catch","err","className","Loading","onSubmit","e","preventDefault","validator","isEmail","userData","uuidv4","firstName","lastName","setItem","target","reset","alert","handleSignup","TextField","label","error","helperText","onChange","value","SecureInput","input","setInput","Button","type","to","LOGIN","visibility","setVisibility","onClick"],"mappings":"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","file":"static/js/8.76ab58cf.chunk.js","sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import React, { useState, useEffect } from \"react\";\r\nimport validator from \"validator\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport axios from \"axios\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport \"./Signup.css\";\r\n// constants\r\nimport { LOGIN, HOME } from \"../../constants/routes\";\r\n// components\r\nimport Loading from \"../../components/loading/Loading\";\r\nimport SecureInput from \"../../components/secureInput/SecureInput\";\r\n// material-ui\r\nimport { TextField, Button } from \"@material-ui/core\";\r\n\r\nconst NEW_ENDPOINT = \"https://task5-sac.herokuapp.com/new\";\r\nconst TOKEN_AUTH_ENDPOINT = \"https://task5-sac.herokuapp.com/token\";\r\n\r\nconst Signup = () => {\r\n    const history = useHistory();\r\n    // states\r\n    const [fName, setFname] = useState(\"\");\r\n    const [lName, setLname] = useState(\"\");\r\n    const [city, setCity] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    // errors\r\n    const [fNameErr, setFnameErr] = useState(false);\r\n    const [lNameErr, setLnameErr] = useState(false);\r\n    const [cityErr, setCityErr] = useState(false);\r\n    const [emailErr, setEmailErr] = useState(false);\r\n    const [passwordErr, setPasswordErr] = useState(false);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const { token } = JSON.parse(localStorage.getItem(\"task5_token\"));\r\n\r\n            axios.post(TOKEN_AUTH_ENDPOINT, { token }).then(res => {\r\n                if (res.data.userId)\r\n                    history.push(HOME);\r\n            }).catch(() => { });\r\n        } catch (err) { };\r\n\r\n    }, [history]);\r\n\r\n    const handleSignup = (e) => {\r\n        e.preventDefault();\r\n\r\n        setFnameErr(!fName);\r\n        setLnameErr(!lName);\r\n        setCityErr(!city);\r\n        setEmailErr(!validator.isEmail(email));\r\n        setPasswordErr(!password);\r\n\r\n        if (fName && lName && city && validator.isEmail(email) && password) {\r\n            setIsLoading(true);\r\n            const userData = {\r\n                userId: uuidv4(), // to generate unique data id, but in case of mongo db, we already have a unique id created\r\n                firstName: fName,\r\n                lastName: lName,\r\n                city: city,\r\n                email: email,\r\n                password: password\r\n            };\r\n\r\n            axios.post(NEW_ENDPOINT, userData).then(res => {\r\n                localStorage.setItem(\"task5_token\", JSON.stringify({ token: res.data }));\r\n                e.target.reset();\r\n                history.push(HOME);\r\n                alert(`Congratulations ${fName}, You are registered!`);\r\n            }).catch(() => {\r\n                setIsLoading(false);\r\n                alert(\"Email already exists.\")\r\n            });\r\n\r\n            // reset\r\n            setPassword(\"\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"signup\">\r\n            {isLoading ? <Loading /> : null}\r\n            <form className=\"signup__box\" onSubmit={(e) => handleSignup(e)}>\r\n                <p className=\"signup__title\">Signup</p>\r\n                <TextField\r\n                    label=\"First Name\"\r\n                    error={fNameErr}\r\n                    helperText={fNameErr ? \"What's your first name ?\" : null}\r\n                    onChange={(e) => setFname(e.target.value)} />\r\n                <TextField\r\n                    label=\"Last Name\"\r\n                    error={lNameErr}\r\n                    helperText={lNameErr ? \"What's your last name ?\" : null}\r\n                    onChange={(e) => setLname(e.target.value)} />\r\n                <TextField\r\n                    label=\"City\"\r\n                    error={cityErr}\r\n                    helperText={cityErr ? \"Where do you live ?\" : null}\r\n                    onChange={(e) => setCity(e.target.value)} />\r\n                <TextField\r\n                    label=\"Email\"\r\n                    error={emailErr}\r\n                    helperText={emailErr ? \"What's your valid email ?\" : null}\r\n                    onChange={(e) => setEmail(e.target.value)} />\r\n                <SecureInput label=\"Password\" error={passwordErr} helperText=\"Where's your password ?\" input={password} setInput={setPassword} />\r\n                <Button type=\"submit\">Signup</Button>\r\n                <Link className=\"signup__loginLink\" to={LOGIN}>Have Account?</Link>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useState } from \"react\";\r\nimport \"./SecureInput.css\";\r\n// material-ui\r\nimport { TextField } from \"@material-ui/core\";\r\nimport VisibilityRoundedIcon from '@material-ui/icons/VisibilityRounded';\r\nimport VisibilityOffRoundedIcon from '@material-ui/icons/VisibilityOffRounded';\r\n\r\nconst SecureInput = ({ label, error, helperText, input, setInput }) => {\r\n    const [visibility, setVisibility] = useState(false);\r\n\r\n    return (\r\n        <div className=\"secureInput\" >\r\n            <TextField\r\n                value={input}\r\n                label={label}\r\n                type={visibility ? \"text\" : \"password\"}\r\n                error={error}\r\n                helperText={error ? helperText : \"\"}\r\n                onChange={(e) => setInput(e.target.value)}\r\n            />\r\n            {visibility ? <VisibilityRoundedIcon onClick={() => setVisibility(!visibility)} /> : <VisibilityOffRoundedIcon onClick={() => setVisibility(!visibility)} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SecureInput;\r\n"],"sourceRoot":""}